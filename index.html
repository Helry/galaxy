<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Get Start | galaxy</title>
    <meta name="description" content="react native demo">
    <link rel="icon" href="/galaxy/favicon.png">
    
    <link rel="preload" href="/galaxy/assets/css/styles.f241bf96.css" as="style"><link rel="preload" href="/galaxy/assets/js/app.f241bf96.js" as="script"><link rel="preload" href="/galaxy/assets/js/6.90d47737.js" as="script"><link rel="prefetch" href="/galaxy/assets/css/1.styles.4358e67b.css"><link rel="prefetch" href="/galaxy/assets/css/2.styles.a2bd3099.css"><link rel="prefetch" href="/galaxy/assets/js/1.4358e67b.js"><link rel="prefetch" href="/galaxy/assets/js/10.741298ea.js"><link rel="prefetch" href="/galaxy/assets/js/11.797b6000.js"><link rel="prefetch" href="/galaxy/assets/js/12.ab037ae8.js"><link rel="prefetch" href="/galaxy/assets/js/13.b508c541.js"><link rel="prefetch" href="/galaxy/assets/js/2.a2bd3099.js"><link rel="prefetch" href="/galaxy/assets/js/3.177c5d62.js"><link rel="prefetch" href="/galaxy/assets/js/4.6a2c7900.js"><link rel="prefetch" href="/galaxy/assets/js/5.b1a5a28a.js"><link rel="prefetch" href="/galaxy/assets/js/7.70b60514.js"><link rel="prefetch" href="/galaxy/assets/js/8.ba502f02.js"><link rel="prefetch" href="/galaxy/assets/js/9.7e430355.js">
    <link rel="stylesheet" href="/galaxy/assets/css/1.styles.4358e67b.css"><link rel="stylesheet" href="/galaxy/assets/css/2.styles.a2bd3099.css"><link rel="stylesheet" href="/galaxy/assets/css/styles.f241bf96.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/galaxy/" class="home-link router-link-exact-active router-link-active"><!----> <span class="site-name">galaxy</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/galaxy/" class="nav-link router-link-exact-active router-link-active">Get Start</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">原生</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/galaxy/Native/Android.html" class="nav-link">Android</a></li><li class="dropdown-item"><!----> <a href="/galaxy/Native/iOS.html" class="nav-link">iOS</a></li><li class="dropdown-item"><!----> <a href="/galaxy/Native/脚手架.html" class="nav-link">脚手架</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">数据持久化</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/galaxy/data-persistence/react-native-localstorage.html" class="nav-link">react-native-localstorage</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">热更新</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/galaxy/hot-update/code-push.html" class="nav-link">code-push</a></li><li class="dropdown-item"><!----> <a href="/galaxy/hot-update/react-native-update.html" class="nav-link">react-native-update</a></li><li class="dropdown-item"><!----> <a href="/galaxy/hot-update/code-push-server.html" class="nav-link">code-push-server</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">更多</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/galaxy/more-lib/axios.html" class="nav-link">axios</a></li><li class="dropdown-item"><!----> <a href="/galaxy/more-lib/mobx.html" class="nav-link">mobx</a></li></ul></div></div> <a href="https://github.com/youngjuning/galaxy" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/galaxy/" class="nav-link router-link-exact-active router-link-active">Get Start</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">原生</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/galaxy/Native/Android.html" class="nav-link">Android</a></li><li class="dropdown-item"><!----> <a href="/galaxy/Native/iOS.html" class="nav-link">iOS</a></li><li class="dropdown-item"><!----> <a href="/galaxy/Native/脚手架.html" class="nav-link">脚手架</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">数据持久化</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/galaxy/data-persistence/react-native-localstorage.html" class="nav-link">react-native-localstorage</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">热更新</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/galaxy/hot-update/code-push.html" class="nav-link">code-push</a></li><li class="dropdown-item"><!----> <a href="/galaxy/hot-update/react-native-update.html" class="nav-link">react-native-update</a></li><li class="dropdown-item"><!----> <a href="/galaxy/hot-update/code-push-server.html" class="nav-link">code-push-server</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">更多</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/galaxy/more-lib/axios.html" class="nav-link">axios</a></li><li class="dropdown-item"><!----> <a href="/galaxy/more-lib/mobx.html" class="nav-link">mobx</a></li></ul></div></div> <a href="https://github.com/youngjuning/galaxy" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>Get Start</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/galaxy/#一、搭建开发环境" class="sidebar-link">一、搭建开发环境</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/galaxy/#二、工具" class="sidebar-link">二、工具</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/galaxy/#调试工具" class="sidebar-link">调试工具</a></li><li class="sidebar-sub-header"><a href="/galaxy/#优化分析工具" class="sidebar-link">优化分析工具</a></li><li class="sidebar-sub-header"><a href="/galaxy/#反编译工具" class="sidebar-link">反编译工具</a></li><li class="sidebar-sub-header"><a href="/galaxy/#模拟器调试" class="sidebar-link">模拟器调试</a></li></ul></li><li><a href="/galaxy/#三、创建一个新项目" class="sidebar-link">三、创建一个新项目</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/galaxy/#_3-1-react-native-0-57-适配" class="sidebar-link">3.1 react-native 0.57.* 适配</a></li><li class="sidebar-sub-header"><a href="/galaxy/#_3-2-es6-装饰器-decorators-及runtime-支持" class="sidebar-link">3.2 ES6 装饰器(decorators)及runtime 支持</a></li><li class="sidebar-sub-header"><a href="/galaxy/#_3-3-symbol语法支持" class="sidebar-link">3.3 Symbol语法支持</a></li></ul></li><li><a href="/galaxy/#四、优化开发体验" class="sidebar-link">四、优化开发体验</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/galaxy/#_4-1、npm-scripts" class="sidebar-link">4.1、npm scripts</a></li><li class="sidebar-sub-header"><a href="/galaxy/#_4-2、让-react-native-支持使用-jsx-后缀" class="sidebar-link">4.2、让 react-native 支持使用 .jsx 后缀</a></li><li class="sidebar-sub-header"><a href="/galaxy/#_4-3、eslint" class="sidebar-link">4.3、eslint</a></li><li class="sidebar-sub-header"><a href="/galaxy/#_4-4、editorconfig" class="sidebar-link">4.4、editorconfig</a></li><li class="sidebar-sub-header"><a href="/galaxy/#_4-5、屏蔽所有-yellowbox" class="sidebar-link">4.5、屏蔽所有 YellowBox</a></li><li class="sidebar-sub-header"><a href="/galaxy/#_4-6、console-语句自动删除" class="sidebar-link">4.6、console.* 语句自动删除</a></li></ul></li><li><a href="/galaxy/#五、android" class="sidebar-link">五、Android</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/galaxy/#_5-1、maven-仓库" class="sidebar-link">5.1、Maven 仓库</a></li><li class="sidebar-sub-header"><a href="/galaxy/#_5-2、打包apk" class="sidebar-link">5.2、打包APK</a></li><li class="sidebar-sub-header"><a href="/galaxy/#_5-3、打包优化" class="sidebar-link">5.3、打包优化</a></li><li class="sidebar-sub-header"><a href="/galaxy/#_5-4-自定义安卓打包的后缀" class="sidebar-link">5.4 自定义安卓打包的后缀</a></li><li class="sidebar-sub-header"><a href="/galaxy/#_5-5、配置app名称" class="sidebar-link">5.5、配置App名称</a></li><li class="sidebar-sub-header"><a href="/galaxy/#_5-6、修改app的图标" class="sidebar-link">5.6、修改App的图标</a></li></ul></li><li><a href="/galaxy/#其他" class="sidebar-link">其他</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/galaxy/#处理系统文字" class="sidebar-link">处理系统文字</a></li></ul></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="get-start"><a href="#get-start" aria-hidden="true" class="header-anchor">#</a> Get Start</h1> <h2 id="一、搭建开发环境"><a href="#一、搭建开发环境" aria-hidden="true" class="header-anchor">#</a> 一、搭建开发环境</h2> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>React Native 中文网（以下我们简称“中文网”）对此已经做了详尽的说明，请移步：<a href="http://t.cn/EwjUTLT" target="_blank" rel="noopener noreferrer">搭建开发环境<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <p>作为补充，这里我们奉上 NodeJs、Java环境的配置和维护：</p> <ul><li>NodeJs开发环境维护：<a href="http://t.cn/EwjGwYE" target="_blank" rel="noopener noreferrer">http://t.cn/EwjGwYE<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>Java环境维护：<a href="http://t.cn/EwjG8TQ" target="_blank" rel="noopener noreferrer">http://t.cn/EwjGwYE<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <h2 id="二、工具"><a href="#二、工具" aria-hidden="true" class="header-anchor">#</a> 二、工具</h2> <h3 id="调试工具"><a href="#调试工具" aria-hidden="true" class="header-anchor">#</a> 调试工具</h3> <ul><li>react-devtools
<ul><li><a href="http://t.cn/RZ9KB7U" target="_blank" rel="noopener noreferrer">Chrome React Developer Tools<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="http://t.cn/EhzaHUR" target="_blank" rel="noopener noreferrer">Firefox React Developer Tools<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="http://t.cn/Ewjqgec" target="_blank" rel="noopener noreferrer">Standalone app<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li> <li><a href="http://t.cn/EhzKUdI" target="_blank" rel="noopener noreferrer">react-native-debugger<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="http://t.cn/EhzKUdI" target="_blank" rel="noopener noreferrer">reactotron<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <h3 id="优化分析工具"><a href="#优化分析工具" aria-hidden="true" class="header-anchor">#</a> 优化分析工具</h3> <ul><li><a href="https://nimbledroid.com/" target="_blank" rel="noopener noreferrer">nimbledroid<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <h3 id="反编译工具"><a href="#反编译工具" aria-hidden="true" class="header-anchor">#</a> 反编译工具</h3> <ul><li><a href="https://github.com/skylot/jadx" target="_blank" rel="noopener noreferrer">jadx<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <h3 id="模拟器调试"><a href="#模拟器调试" aria-hidden="true" class="header-anchor">#</a> 模拟器调试</h3> <ol><li>下载安装 <a href="http://mumu.163.com/" target="_blank" rel="noopener noreferrer">MUMU模拟器<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>打开MUMU模拟器</li> <li>执行 <code>adb connect 127.0.0.1:7555</code> 连接MUMU模拟器</li> <li>启动项目：<code>react-native run-android</code></li></ol> <h2 id="三、创建一个新项目"><a href="#三、创建一个新项目" aria-hidden="true" class="header-anchor">#</a> 三、创建一个新项目</h2> <p>使用 React Native 命令行工具来创建一个名为&quot;AwesomeProject&quot;的新项目：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ react-native init AwesomeProject
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="tip custom-block"><p class="custom-block-title">TIP</p> <ul><li>你可以使用 <code>--version</code> 参数（注意是两个杠）创建指定版本的项目。例如 <code>react-native init MyApp --version 0.44.3</code>。注意版本号必须精确到两个小数点。</li> <li>你还可以使用 <code>--tepmlate</code> 参数创建指定模版的项目。例如 <code>react-native init MyApp --template youngjuning</code>。模版可以去 npm 搜索，格式是 <code>react-native-template-*</code></li></ul></div> <h3 id="_3-1-react-native-0-57-适配"><a href="#_3-1-react-native-0-57-适配" aria-hidden="true" class="header-anchor">#</a> 3.1 react-native 0.57.* 适配</h3> <ul><li><a href="http://t.cn/EwYmviS" target="_blank" rel="noopener noreferrer">react-native-releases/CHANGELOG.md<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://www.jianshu.com/p/cc0174b4a9c5" target="_blank" rel="noopener noreferrer">react-native版本迁移教程<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <h3 id="_3-2-es6-装饰器-decorators-及runtime-支持"><a href="#_3-2-es6-装饰器-decorators-及runtime-支持" aria-hidden="true" class="header-anchor">#</a> 3.2 ES6 装饰器(decorators)及runtime 支持</h3> <ol><li>安装babel相关库： <code>yarn add @babel/core @babel/plugin-proposal-decorators @babel/plugin-transform-runtime @babel/runtime</code></li> <li>如果使用了装饰器（Mobx用得到），则需要配置 <code>.babelrc</code>:</li></ol> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token property">&quot;plugins&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token punctuation">[</span><span class="token string">&quot;@babel/plugin-proposal-decorators&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token property">&quot;legacy&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token string">&quot;@babel/transform-runtime&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token property">&quot;helpers&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><span class="token property">&quot;regenerator&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="_3-3-symbol语法支持"><a href="#_3-3-symbol语法支持" aria-hidden="true" class="header-anchor">#</a> 3.3 Symbol语法支持</h3> <blockquote><p>如果还不知道 Symbol 为何物的朋友，墙裂推荐读读 <a href="http://t.cn/EwuvKej" target="_blank" rel="noopener noreferrer">ES6的Symbol竟然那么强大，面试中的加分点啊<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 这篇文章</p></blockquote> <div class="warning custom-block"><p class="custom-block-title">WARNING</p> <p>Can't find variable: Symbol</p></div> <p>如上警告，不幸的是，React Native 中默认是不支持 Symbol的，幸运的是我们并不是对此束手无策，下面我就为大家推荐两种解决办法：</p> <p>你可是使用 ES6 Symbol polyfill 来支持：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ yarn add es6-symbol
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>并把下面的代码加入 <code>index.js</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>import 'es6-symbol/implement'
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>另外，我们也推荐 <a href="http://t.cn/EwuPlyh" target="_blank" rel="noopener noreferrer">jsc-android<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，使用它你可以不必使用polyfill，并且它还能使你的app更快。</p> <h2 id="四、优化开发体验"><a href="#四、优化开发体验" aria-hidden="true" class="header-anchor">#</a> 四、优化开发体验</h2> <h3 id="_4-1、npm-scripts"><a href="#_4-1、npm-scripts" aria-hidden="true" class="header-anchor">#</a> 4.1、npm scripts</h3> <p>你是否还在使用冗长的命令调试项目？</p> <p>你是否还在手动删除 <code>build</code> 文件夹？？</p> <p>你是否还在为以上问题而苦恼？？？</p> <p>解决麻烦的方法其实很简单，那就是配置常用的命令到 <code>npm scripts</code> 中去（<code>package.json</code> 的 <code>scripts</code> 配置项）,一下就是本库的 <code>npm scripts</code></p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;start&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node node_modules/react-native/local-cli/cli.js start&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;test&quot;</span><span class="token operator">:</span> <span class="token string">&quot;jest&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;docs:dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vuepress dev docs&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;docs:build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vuepress build docs&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;clean&quot;</span><span class="token operator">:</span> <span class="token string">&quot;cd android &amp;&amp; ./gradlew clean&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;yarn clean &amp;&amp; react-native run-android&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;assembleRelease&quot;</span><span class="token operator">:</span> <span class="token string">&quot;cd android &amp;&amp; ./gradlew assembleRelease&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;installRelease&quot;</span><span class="token operator">:</span> <span class="token string">&quot;cd android &amp;&amp; ./gradlew installRelease&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;keygen&quot;</span><span class="token operator">:</span> <span class="token string">&quot;keytool -genkey -v -keystore my-release-key.keystore -alias my-key-alias -keyalg RSA -keysize 2048 -validity 36500&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;key-debug&quot;</span><span class="token operator">:</span> <span class="token string">&quot;keytool -list -v -keystore ~/.android/debug.keystore&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;key-release&quot;</span><span class="token operator">:</span> <span class="token string">&quot;keytool -v -list -keystore  ./android/app/my-release-key.keystore&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;bundle-android&quot;</span><span class="token operator">:</span> <span class="token string">&quot;react-native bundle --entry-file index.js --bundle-output ./android-bundle/index.android.bundle --platform android --assets-dest ./android-bundle --dev false --sourcemap-output ./android-bundle/android-release.bundle.map&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;bundle-ios&quot;</span><span class="token operator">:</span> <span class="token string">&quot;react-native bundle --entry-file index.js --bundle-output ./ios-bundle/index.ios.bundle --platform ios --assets-dest ./ios-bundle --dev false --sourcemap-output ./ios-bundle/ios-release.bundle.map&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;code-push-ios&quot;</span><span class="token operator">:</span> <span class="token string">&quot;code-push release-react mobileapp  ios  -d Staging --targetBinaryVersion 1.0.0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;code-push-android&quot;</span><span class="token operator">:</span> <span class="token string">&quot;code-push release-react mobileapp  android  -d Staging --targetBinaryVersion 1.0.0&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="_4-2、让-react-native-支持使用-jsx-后缀"><a href="#_4-2、让-react-native-支持使用-jsx-后缀" aria-hidden="true" class="header-anchor">#</a> 4.2、让 react-native 支持使用 .jsx 后缀</h3> <p>配置这个并不只是强迫症所致（完全是强迫症所致），而是为了让编辑器更好的区别 <code>js</code> 语法和 <code>jsx</code> 语法。</p> <p><strong>&gt; 0.57.</strong>*</p> <p>在项目根目录新建 <strong>metro.config.js</strong> 文件并写入以下内容：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// @name Make ReactNative Great Again</span>
<span class="token comment">// @description Allows you to enable support for JSX files, and `.mjs` files which is the new node standard</span>
<span class="token comment">// @source http://www.fallingcanbedeadly.com/posts/enabling-react-native-jsx-extension</span>
<span class="token comment">// @source https://github.com/airbnb/javascript/issues/982</span>
<span class="token comment">// @note One caveat, The `index.js` file in the root of your project has to be `.js`.</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  resolver<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    sourceExts<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'js'</span><span class="token punctuation">,</span> <span class="token string">'json'</span><span class="token punctuation">,</span> <span class="token string">'ts'</span><span class="token punctuation">,</span> <span class="token string">'tsx'</span><span class="token punctuation">,</span> <span class="token string">'jsx'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><strong>&lt; 0.57.</strong>*</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// @name Make ReactNative Great Again</span>
<span class="token comment">// @description Allows you to enable support for JSX files, and `.mjs` files which is the new node standard</span>
<span class="token comment">// @source http://www.fallingcanbedeadly.com/posts/enabling-react-native-jsx-extension</span>
<span class="token comment">// @issues https://github.com/airbnb/javascript/issues/982</span>
<span class="token comment">// @issues https://github.com/facebook/metro/issues/248</span>
<span class="token comment">// @note One caveat, The `index.js` file in the root of your project has to be `.js`.</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  getSourceExts<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token string">'jsx'</span><span class="token punctuation">,</span> <span class="token string">'mjs'</span><span class="token punctuation">,</span> <span class="token string">'js'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="_4-3、eslint"><a href="#_4-3、eslint" aria-hidden="true" class="header-anchor">#</a> 4.3、eslint</h3> <p>参考 <a href="http://t.cn/Ewc4CVH" target="_blank" rel="noopener noreferrer">http://t.cn/Ewc4CVH<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="_4-4、editorconfig"><a href="#_4-4、editorconfig" aria-hidden="true" class="header-anchor">#</a> 4.4、editorconfig</h3> <div class="language-yml line-numbers-mode"><pre class="language-text"><code># EditorConfig is awesome: http://EditorConfig.org

# top-most EditorConfig file
root = true

# Unix-style newlines with a newline ending every file
[*]
indent_style = space
indent_size = 2
end_of_line = lf
charset = utf-8
trim_trailing_whitespace = true
insert_final_newline = true

[*.gradle]
indent_size = 4

[BUCK]
indent_size = 4
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="_4-5、屏蔽所有-yellowbox"><a href="#_4-5、屏蔽所有-yellowbox" aria-hidden="true" class="header-anchor">#</a> 4.5、屏蔽所有 YellowBox</h3> <p><strong>index.js</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 关闭全部的警告</span>
YellowBox<span class="token punctuation">.</span><span class="token function">ignoreWarnings</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">''</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment">// 或者通过这句代码屏蔽 YellowBox</span>
<span class="token comment">// console.disableYellowBox = true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_4-6、console-语句自动删除"><a href="#_4-6、console-语句自动删除" aria-hidden="true" class="header-anchor">#</a> 4.6、console.* 语句自动删除</h3> <p>首先需要使用 <code>yarn add --dev babel-plugin-transform-remove-console</code> 来安装，然后在项目根目录下编辑（或者是新建）一个名为  <code>.babelrc</code> 的文件，在其中加入：</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;env&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;production&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;plugins&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;transform-remove-console&quot;</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="五、android"><a href="#五、android" aria-hidden="true" class="header-anchor">#</a> 五、Android</h2> <h3 id="_5-1、maven-仓库"><a href="#_5-1、maven-仓库" aria-hidden="true" class="header-anchor">#</a> 5.1、Maven 仓库</h3> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>aliyun是为了加快下载速度、jitpack是因为有些库需要它</p></div> <p>将以下代码配置到<code>android/build.gradle</code> 配置文件的 <code>buildscript/repositories</code> 和 <code>allprojects/repositories</code> 下</p> <div class="language-grrovy line-numbers-mode"><pre class="language-text"><code>maven{
    url 'http://maven.aliyun.com/nexus/content/groups/public/'
    name 'aliyun'
}
maven {
    url &quot;https://jitpack.io&quot;
    name 'jitpack'
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="_5-2、打包apk"><a href="#_5-2、打包apk" aria-hidden="true" class="header-anchor">#</a> 5.2、打包APK</h3> <ol><li>在项目根目录执行 <code>yarn keygen</code> 生成密钥文件 <code>my-release-key.keystore</code></li> <li>把 <code>my-release-key.keystore</code> 文件放到你工程中的 <code>android/app</code> 文件夹下。</li> <li>编辑 <code>android/gradle.properties</code> ，添加如下的代码（注意把其中的****替换为相应密码）</li> <li>编辑 <code>android/gradle.properties</code> ，添加如下的代码（注意把其中的****替换为相应密码）</li></ol> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token attr-name">MYAPP_RELEASE_STORE_FILE</span><span class="token punctuation">=</span><span class="token attr-value">my-release-key.keystore</span>
<span class="token attr-name">MYAPP_RELEASE_KEY_ALIAS</span><span class="token punctuation">=</span><span class="token attr-value">my-key-alias</span>
<span class="token attr-name">MYAPP_RELEASE_STORE_PASSWORD</span><span class="token punctuation">=</span><span class="token attr-value">****</span>
<span class="token attr-name">MYAPP_RELEASE_KEY_PASSWORD</span><span class="token punctuation">=</span><span class="token attr-value">****</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ol start="5"><li>配置 <strong>android/app/build.gradle</strong></li></ol> <div class="language-groovy line-numbers-mode"><pre class="language-groovy"><code>android<span class="token punctuation">{</span>
    signingConfigs <span class="token punctuation">{</span>
        debug <span class="token punctuation">{</span><span class="token punctuation">}</span>
        release <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>project<span class="token operator">.</span><span class="token function">hasProperty</span><span class="token punctuation">(</span><span class="token string">'MYAPP_RELEASE_STORE_FILE'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                storeFile <span class="token function">file</span><span class="token punctuation">(</span>MYAPP_RELEASE_STORE_FILE<span class="token punctuation">)</span>
                storePassword MYAPP_RELEASE_STORE_PASSWORD
                keyAlias MYAPP_RELEASE_KEY_ALIAS
                keyPassword MYAPP_RELEASE_KEY_PASSWORD
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    buildTypes <span class="token punctuation">{</span>
        release <span class="token punctuation">{</span>
            <span class="token punctuation">...</span>
            signingConfig signingConfigs<span class="token operator">.</span>release
            <span class="token punctuation">...</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>如果提示密码错误，而密码又是对的，那就直接如下配置：</p> <div class="language-groovy line-numbers-mode"><pre class="language-groovy"><code>release <span class="token punctuation">{</span>
    storeFile <span class="token function">file</span><span class="token punctuation">(</span><span class="token string gstring">&quot;my-release-key.keystore&quot;</span><span class="token punctuation">)</span>
    storePassword <span class="token string gstring">&quot;123456&quot;</span>
    keyAlias <span class="token string gstring">&quot;my-key-alias&quot;</span>
    keyPassword <span class="token string gstring">&quot;123456&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_5-3、打包优化"><a href="#_5-3、打包优化" aria-hidden="true" class="header-anchor">#</a> 5.3、打包优化</h3> <h4 id="_1、启用-proguard-代码混淆来缩小-apk文件的大小"><a href="#_1、启用-proguard-代码混淆来缩小-apk文件的大小" aria-hidden="true" class="header-anchor">#</a> 1、启用 Proguard 代码混淆来缩小 APK文件的大小</h4> <p>Proguard是一个Java字节码混淆压缩工具，它可以移除掉 React Native Java（和它的依赖库中）中没有被使用到的部分，最终有效的减少APK的大小。</p> <p>打开 <code>android/app/build.gradle</code> 文件，设置 <code>minifyEnabled</code> 选项为 <code>true</code>：</p> <div class="language-groovy line-numbers-mode"><pre class="language-groovy"><code><span class="token keyword">def</span> enableProguardInReleaseBuilds <span class="token operator">=</span> <span class="token boolean">true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="warning custom-block"><p class="custom-block-title">WARNING</p> <p>警告：启用Proguard之后，你必须再次全面地测试你的应用。Proguard有时候需要为你引入的每个原生库做一些额外的配置。参见 app/proguard-rules.pro 文件和每个原生库的安装说明</p> <p>当您使用ProGuard时，您必须始终解决所有警告。</p> <p>这些警告告诉你，这些库引用了一些代码，没有任何来源。那可能可能不行这取决于有问题的代码是否被调用。http://t.cn/EwIL17p</p></div> <h4 id="_2、配置-packagingoptions"><a href="#_2、配置-packagingoptions" aria-hidden="true" class="header-anchor">#</a> 2、配置 PackagingOptions</h4> <p>打开 <code>android/app/build.gradle</code> 文件</p> <div class="language-grrovy line-numbers-mode"><pre class="language-text"><code>// 打包配置（http://t.cn/Ewt1xD2）
packagingOptions {
    /**
     * 1、pickFirsts:当出现重复文件，会使用第一个匹配的文件打包进入apk
     * 2、merges:当出现重复文件，合并重复的文件打入apk
     * 3、excludes:打包的时候排除匹配的文件
     */
    /* pickFirsts = ['META-INF/LICENSE'] */
    /* merge 'META-INF/LICENSE' */
    exclude 'META-INF/LICENSE'
    exclude 'META-INF/NOTICE.txt'
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="_3、配置-splits（可选）"><a href="#_3、配置-splits（可选）" aria-hidden="true" class="header-anchor">#</a> 3、配置 splits（可选）</h4> <p>默认情况下，生成的 APK 会同时包含针对于 x86 和 ARMv7a 两种 CPU 架构的原生代码。这样可以让我们更方便的向其他人分享这个 APK，因为它几乎可以运行在所有的 Android 设备上。但是，这会导致所有设备上都有一些根本不会运行的代码，白白占据了空间。目前安卓设备绝大多数是 ARM 架构，因此对于大部分应用来说可以考虑去掉 x86 架构的支持。</p> <p>你可以在 <code>android/app/build.gradle</code> 中修改如下代码（false 改为 true）来生成针对不同 CPU 架构的 APK。</p> <blockquote><p>具体参考：<a href="http://t.cn/Ewchm37" target="_blank" rel="noopener noreferrer">http://t.cn/Ewchm37<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <h4 id="_4、开启-zipalignenabled"><a href="#_4、开启-zipalignenabled" aria-hidden="true" class="header-anchor">#</a> 4、开启 zipAlignEnabled</h4> <blockquote><p>zipalign的工具的使用：<a href="http://t.cn/EwcA9K8" target="_blank" rel="noopener noreferrer">http://t.cn/EwcA9K8<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <p>这里只是优化apk，没有执行压缩相关操作</p> <div class="language-groovy line-numbers-mode"><pre class="language-groovy"><code>buildTypes <span class="token punctuation">{</span>
  release <span class="token punctuation">{</span>
      signingConfig signingConfigs<span class="token operator">.</span>release
      minifyEnabled enableProguardInReleaseBuilds
      zipAlignEnabled <span class="token boolean">true</span> <span class="token comment">// 对齐zip</span>
      proguardFiles <span class="token function">getDefaultProguardFile</span><span class="token punctuation">(</span><span class="token string gstring">&quot;proguard-android.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string gstring">&quot;proguard-rules.pro&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="_6、开启-shrinkresources-和-设置debuggable为false"><a href="#_6、开启-shrinkresources-和-设置debuggable为false" aria-hidden="true" class="header-anchor">#</a> 6、开启 shrinkResources 和 设置debuggable为false</h4> <blockquote><p>移除无用的resource文件：<a href="http://t.cn/EwcLLUa" target="_blank" rel="noopener noreferrer">http://t.cn/EwcLLUa<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <div class="language-groovy line-numbers-mode"><pre class="language-groovy"><code>buildTypes <span class="token punctuation">{</span>
  release <span class="token punctuation">{</span>
      signingConfig signingConfigs<span class="token operator">.</span>release
      minifyEnabled enableProguardInReleaseBuilds
      zipAlignEnabled <span class="token boolean">true</span>
      shrinkResources <span class="token boolean">true</span> <span class="token comment">// 移除无用的resource文件</span>
      debuggable <span class="token boolean">false</span> <span class="token comment">// 是否debug</span>
      proguardFiles <span class="token function">getDefaultProguardFile</span><span class="token punctuation">(</span><span class="token string gstring">&quot;proguard-android.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string gstring">&quot;proguard-rules.pro&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h4 id="_6、去除无用的语言资源"><a href="#_6、去除无用的语言资源" aria-hidden="true" class="header-anchor">#</a> 6、去除无用的语言资源</h4> <p>通过配置 <code>android/defaultConfig/resConfigs</code>  可以选择只打包哪几种语言，进而去掉各种 <code>aar</code> 包中全世界的语言，尤其是 <strong>support</strong> 包中的。</p> <p>选择保留什么语言要根据产品的用户和市场来定，如果只选择默认英语和中文语言，配置如下：</p> <div class="language-groovy line-numbers-mode"><pre class="language-groovy"><code>defaultConfig <span class="token punctuation">{</span>
	<span class="token punctuation">...</span>
    resConfigs <span class="token string gstring">&quot;en&quot;</span><span class="token punctuation">,</span><span class="token string gstring">&quot;zh&quot;</span> <span class="token comment">// 只使用英语和中文语言</span>
    <span class="token punctuation">...</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="_7、避免使用重复的库"><a href="#_7、避免使用重复的库" aria-hidden="true" class="header-anchor">#</a> 7、避免使用重复的库</h4> <div class="language-groovy line-numbers-mode"><pre class="language-groovy"><code><span class="token function">compile</span><span class="token punctuation">(</span><span class="token string">'com.facebook.android:audience-network-sdk:4.23.0'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    exclude group<span class="token punctuation">:</span> <span class="token string">'com.android.support'</span><span class="token punctuation">,</span> module<span class="token punctuation">:</span> <span class="token string">'appcompat-v7'</span><span class="token comment">// 因为项目引用了v7包，这里排除第三方库的v7包，避免重复</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">compile</span><span class="token punctuation">(</span><span class="token string">'com.google.firebase:firebase-ads:9.6.1'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    exclude group<span class="token punctuation">:</span> <span class="token string">'com.android.support'</span> <span class="token comment">// 因为项目引用了v7包，这里排除第三方库的v7包，避免重复</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="_8、使用-implementation-代替-compile"><a href="#_8、使用-implementation-代替-compile" aria-hidden="true" class="header-anchor">#</a> 8、使用 implementation 代替 compile</h4> <p><img src="https://i.loli.net/2018/11/02/5bdb50fb13fa5.png" alt></p> <p>如图，'compile' 已经被废弃并且已经被 'impementation' 和 'api' 代替.而且 2018 年底会彻底废弃，修复的话就是把 <strong>android\app\build.gradle</strong> 中的 <code>dependencies</code> 配置中的 <code>compile</code> 改为 <code>impementation</code>。</p> <h4 id="_9、配置-dexoptions-javamaxheapsize"><a href="#_9、配置-dexoptions-javamaxheapsize" aria-hidden="true" class="header-anchor">#</a> 9、配置 dexOptions.javaMaxHeapSize</h4> <blockquote><p>android studio 需要较大的内存才能正常编译项目</p></blockquote> <p>在 <strong>android\gradle.properties</strong> 中加入以下配置</p> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token comment"># 主要解决这个警告：com.android.build.api.transform.TransformException：http://t.cn/EZcTDtV</span>
<span class="token attr-name">dexOptions.javaMaxHeapSize</span> <span class="token punctuation">=</span> <span class="token attr-value">2g</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="_10、配置方法数超过-64k-的应用"><a href="#_10、配置方法数超过-64k-的应用" aria-hidden="true" class="header-anchor">#</a> 10、配置方法数超过 64K 的应用</h4> <blockquote><p>随着 Android 平台的持续成长，Android 应用的大小也在增加。当您的应用及其引用的库达到特定大小时，您会遇到构建错误，指明您的应用已达到 Android 应用构建架构的极限。会报告这一错误：</p> <p>The number of method references in a .dex file cannot exceed 64K.</p></blockquote> <p>解决办法是配置您的应用进行 Dalvik 可执行文件分包：</p> <p>在 <strong>android/app/build.gradle</strong> 中做下面的配置：</p> <div class="language-groovy line-numbers-mode"><pre class="language-groovy"><code>android <span class="token punctuation">{</span>
    <span class="token punctuation">...</span>
    defaultConfig <span class="token punctuation">{</span>
        <span class="token punctuation">...</span>
        multiDexEnabled <span class="token boolean">true</span>
        <span class="token punctuation">...</span>
    <span class="token punctuation">}</span>
    <span class="token punctuation">...</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="_11、删除未使用到xml和图片"><a href="#_11、删除未使用到xml和图片" aria-hidden="true" class="header-anchor">#</a> 11、删除未使用到xml和图片</h4> <p>如何知道哪些xml和图片未被使用到？使用Android Studio的Lint，步骤：</p> <ol><li><code>Android Studio</code> -&gt; <code>Menu</code> -&gt; <code>Refactor</code> -&gt; <code>Remove Unused Resources</code></li> <li>选择 <code>Refactor</code> 一键删除</li> <li>选择 <code>Perview</code> 预览未使用到的资源</li></ol> <p>或者</p> <p>点击菜单栏 <code>Analyze</code> -&gt; <code>Run Inspection by Name</code> -&gt; <code>unused resources</code> -&gt; <code>Moudule ‘app’</code> -&gt; <code>OK</code>，这样会搜出来哪些未被使用到未使用到xml和图片，如下：</p> <p><img src="http://wuxiaolong.me/images/reduceAPKSize1.png" alt></p> <h4 id="_12、删除未使用到代码"><a href="#_12、删除未使用到代码" aria-hidden="true" class="header-anchor">#</a> 12、删除未使用到代码</h4> <p>同样使用 Android Studio 的 Lint ，步骤：点击菜单栏 <code>Analyze</code> -&gt; <code>Run Inspection by Name</code> -&gt; <code>unused declaration</code> -&gt; <code>Moudule ‘app’</code> -&gt; <code>OK</code></p> <h4 id="_13、使用微信android资源混淆工具（可选）"><a href="#_13、使用微信android资源混淆工具（可选）" aria-hidden="true" class="header-anchor">#</a> 13、使用微信Android资源混淆工具（可选）</h4> <p>微信AndResGuard是一个帮助你缩小APK大小的工具，详情：<img src="https://github.com/shwenzhang/AndResGuard" alt="Android资源混淆工具使用说明">。使用方法：</p> <h3 id="_5-4-自定义安卓打包的后缀"><a href="#_5-4-自定义安卓打包的后缀" aria-hidden="true" class="header-anchor">#</a> 5.4 自定义安卓打包的后缀</h3> <div class="language-groovy line-numbers-mode"><pre class="language-groovy"><code><span class="token punctuation">...</span>
<span class="token keyword">def</span> <span class="token function">releaseTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string gstring">&quot;yyyyMMdd-HHmmss&quot;</span><span class="token punctuation">,</span> TimeZone<span class="token operator">.</span><span class="token function">getTimeZone</span><span class="token punctuation">(</span><span class="token string gstring">&quot;GMT+08:00&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token punctuation">...</span>
android<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    applicationVariants<span class="token operator">.</span>all <span class="token punctuation">{</span> variant <span class="token operator">-&gt;</span>
    		variant<span class="token operator">.</span>outputs<span class="token operator">.</span>all <span class="token punctuation">{</span>
            <span class="token comment">// the apk name is e.g. galaxy_v1.0.1_2018-11-1_debug.apk</span>
            outputFileName <span class="token operator">=</span> <span class="token string gstring">&quot;galaxy_v<span class="token expression"><span class="token punctuation">$</span><span class="token punctuation">{</span>defaultConfig<span class="token operator">.</span>versionName<span class="token punctuation">}</span></span>_<span class="token expression"><span class="token punctuation">$</span><span class="token punctuation">{</span><span class="token function">releaseTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span>_<span class="token expression"><span class="token punctuation">$</span><span class="token punctuation">{</span>variant<span class="token operator">.</span>buildType<span class="token operator">.</span>name<span class="token punctuation">}</span></span>.apk&quot;</span>
        <span class="token punctuation">}</span>
        <span class="token punctuation">...</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token punctuation">...</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="_5-5、配置app名称"><a href="#_5-5、配置app名称" aria-hidden="true" class="header-anchor">#</a> 5.5、配置App名称</h3> <p>很简单,我们直接打开 <strong>android/app/src/main/res/values/strings.xml</strong>，即可看到配置中的 <code>app_name</code>，修改为你想要的即可:</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resources</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>app_name<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>银河<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>string</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resources</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_5-6、修改app的图标"><a href="#_5-6、修改app的图标" aria-hidden="true" class="header-anchor">#</a> 5.6、修改App的图标</h3> <p>也很简单，在 <strong>android\app\src\main\res\mipmap-xxxxxx</strong> 中直接覆盖图标就可以，注意图标的大小。</p> <h2 id="其他"><a href="#其他" aria-hidden="true" class="header-anchor">#</a> 其他</h2> <h3 id="处理系统文字"><a href="#处理系统文字" aria-hidden="true" class="header-anchor">#</a> 处理系统文字</h3> <h4 id="android"><a href="#android" aria-hidden="true" class="header-anchor">#</a> Android</h4> <p>在 <strong>android\app\src\main\java\com\galaxy\MainApplication.java</strong> 文件中加入如下代码：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">import</span> android<span class="token punctuation">.</span>content<span class="token punctuation">.</span>res<span class="token punctuation">.</span>Configuration<span class="token punctuation">;</span>
<span class="token keyword">import</span> android<span class="token punctuation">.</span>content<span class="token punctuation">.</span>res<span class="token punctuation">.</span>Resources<span class="token punctuation">;</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token comment">// 让文字不随系统文字变化：http://t.cn/Rs26Veb</span>
<span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onConfigurationChanged</span><span class="token punctuation">(</span>Configuration newConfig<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>newConfig<span class="token punctuation">.</span>fontScale <span class="token operator">!=</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token comment">//非默认值</span>
    <span class="token function">getResources</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onConfigurationChanged</span><span class="token punctuation">(</span>newConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> Resources <span class="token function">getResources</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  Resources res <span class="token operator">=</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">getResources</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span><span class="token function">getConfiguration</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>fontScale <span class="token operator">!=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//非默认值</span>
    Configuration newConfig <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Configuration</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    newConfig<span class="token punctuation">.</span><span class="token function">setToDefaults</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//设置默认</span>
    res<span class="token punctuation">.</span><span class="token function">updateConfiguration</span><span class="token punctuation">(</span>newConfig<span class="token punctuation">,</span> res<span class="token punctuation">.</span><span class="token function">getDisplayMetrics</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> res<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h4 id="ios"><a href="#ios" aria-hidden="true" class="header-anchor">#</a> iOS</h4> <ol><li>安装 <strong>react-native-add-custom-props</strong> : <code>yarn add react-native-add-custom-props</code></li> <li>在 <code>index.js</code> 中配置如下</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">...</span>
<span class="token keyword">import</span> addCustomProps <span class="token keyword">from</span> <span class="token string">'react-native-add-custom-props'</span>
<span class="token operator">...</span>
<span class="token comment">// 处理ios系统文字</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>iOS<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">addCustomProps</span><span class="token punctuation">(</span>Text<span class="token punctuation">,</span> <span class="token punctuation">{</span> allowFontScaling<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token function">addCustomProps</span><span class="token punctuation">(</span>TextInput<span class="token punctuation">,</span> <span class="token punctuation">{</span> allowFontScaling<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/youngjuning/galaxy/edit/master/docs/README.md" target="_blank" rel="noopener noreferrer">帮助我们改善此页面！</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">11/17/2018, 10:45:22 AM</span></div></div> <!----> </div> <!----></div></div>
    <script src="/galaxy/assets/js/6.90d47737.js" defer></script><script src="/galaxy/assets/js/app.f241bf96.js" defer></script>
  </body>
</html>
